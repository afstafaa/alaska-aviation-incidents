<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Alaska Aviation Incidents</title>
  <link rel="stylesheet" href="./styles.css" />

  <style>
    .results { display: grid; gap: 18px; margin-top: 18px; }
    .status  { display:flex; justify-content:space-between; align-items:center; gap:10px; padding: 10px 2px; color: rgba(0,0,0,.55); font-size: 13px; }

    .card {
      background: #fff;
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.06);
    }

    .cardHeadLine1 { font-weight: 900; font-size: 20px; letter-spacing: .2px; }
    .cardHeadLine2 { font-weight: 900; margin-top: 6px; color: rgba(0,0,0,.85); }

    .chips { display:flex; flex-wrap:wrap; gap:10px; margin-top: 12px; }
    .chip { font-size: 12px; padding: 7px 11px; border-radius: 999px; background: rgba(0,0,0,.05); }
    .chip b { font-weight: 800; margin-right: 6px; }

    .narrWrap { margin-top: 12px; }
    .narrPreview {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      line-height: 1.45;
      color: rgba(0,0,0,.78);
      white-space: pre-wrap;
    }
    .narrFull {
      display:none;
      white-space: pre-wrap;
      line-height: 1.45;
      color: rgba(0,0,0,.78);
    }
    .card.expanded .narrPreview { display:none; }
    .card.expanded .narrFull { display:block; }

    .cardActions { margin-top: 10px; display:flex; justify-content:flex-end; }
    .expandBtn {
      border: 1px solid rgba(0,0,0,.12);
      background: #fff;
      border-radius: 10px;
      padding: 8px 12px;
      cursor:pointer;
      font-weight: 700;
    }

    .controls {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 14px;
      background: #fff;
      padding: 18px;
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.06);
    }
    .control label { display:block; font-size: 12px; color: rgba(0,0,0,.55); margin-bottom: 6px; font-weight: 700; }
    .control input, .control select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,.15);
      outline: none;
      background: #fff;
    }
    .download { grid-column: 1 / span 2; }
    .button {
      display:inline-block;
      padding: 12px 16px;
      border-radius: 999px;
      font-weight: 800;
      text-decoration: none;
      border: 0;
      background: #0b4a7a;
      color: #fff;
      text-align: center;
      width: fit-content;
    }

    @media (max-width: 980px) {
      .controls { grid-template-columns: 1fr 1fr; }
      .download { grid-column: 1 / -1; }
    }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="container">
      <h1>Alaska Aviation Incidents</h1>
      <p>Search &amp; filter incident narratives and key fields (client-side, GitHub Pages).</p>
    </div>
  </header>

  <main class="container">
    <section class="controls">
      <div class="control">
        <label for="search">Search</label>
        <input id="search" type="search" placeholder="Search narrative, city, airport, N-number(s), model…" autocomplete="off" />
      </div>

      <div class="control">
        <label for="stateFilter">State</label>
        <select id="stateFilter"></select>
      </div>

      <div class="control">
        <label for="eventFilter">Event type</label>
        <select id="eventFilter"></select>
      </div>

      <div class="control">
        <label for="phaseFilter">Phase</label>
        <select id="phaseFilter"></select>
      </div>

      <div class="control">
        <label for="sortOrder">Sort</label>
        <select id="sortOrder">
          <option value="newest">Newest</option>
          <option value="oldest">Oldest</option>
        </select>
      </div>

      <div class="control download">
        <label>&nbsp;</label>
        <a class="button" href="./data/incidents.csv" download>Download CSV</a>
      </div>
    </section>

    <section class="status">
      <div id="statusMessage">Loading data…</div>
      <div id="rowCount">Rows detected: 0</div>
    </section>

    <section id="results" class="results"></section>
  </main>

  <script src="./app.js"></script>
</body>
</html>
